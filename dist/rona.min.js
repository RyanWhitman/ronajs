/**
 * RonaJS is a JavaScript micro framework / router.
 *
 * @package RonaJS
 * @copyright Copyright (c) 2016 Ryan Whitman (https://ryanwhitman.com)
 * @license https://opensource.org/licenses/MIT MIT
 * @version .5.1.0
 * @see https://github.com/RyanWhitman/ronajs
 * @since .5.0.0
 */
var Rona=function(){var a={system_path:""},b={},c="",d=!1;this.previous_uri="",this.route_vars={},this.config=function(){},this.run=function(){var a=this;document.addEventListener("click",function(b){"string"==typeof b.target.dataset.rona&&"string"==typeof b.target.href&&(b.preventDefault(),a.change_route(b.target.href))}),window.addEventListener("popstate",function(){a.execute_route()}),a.execute_route()},this.execute_route=function(e){var f=this;e="boolean"==typeof e?e:null,c=location.pathname.replace(a.system_path,""),"/"==c&&(c="");var g=c.split("/");route_requested_count=g.length;var h="",i="undefined"==typeof b.regular||"undefined"==typeof b.regular[c]?null:b.regular[c];if(null!==i)h=i;else{var j=b.variable;for(var k in j)if(j.hasOwnProperty(k)){var l=j[k];f.route_vars={};var m=k.split("/");if(route_requested_count==m.length){for(var n=route_requested_count,o=0,p=0;p<n;p++)if(g[p]==m[p])o++;else{if(!m[p].match(/^{.+}$/))break;f.route_vars[m[p].replace("{","").replace("}","")]=g[p],o++}if(o==n){h=l;break}}}}if(!(e===!1||null===e&&d)&&"object"==typeof h){"object"!=typeof f.route_vars&&(f.route_vars={});for(var q in h){var r=h[q];"function"==typeof r?r(f.route_vars):window[r](f.route_vars)}}},this.route=function(a,c){if(a=a.toString().toLowerCase(),"/"==a&&(a=""),"undefined"==typeof c)return!1;"[object Array]"!==Object.prototype.toString.call(c)&&(c=[c]);var e;e=a.match(/[*]/i)?"wildcard":a.match(/\/{.+(}$|}\/)/)?"variable":"regular";var h,f=a.split("/"),g=f.length;if(h="object"==typeof b[e]&&"object"==typeof b[e][a]?b[e][a].concat(c):c,c=null,"wildcard"!=e&&"undefined"!=typeof b.wildcard){var j=b.wildcard,k=[];for(var l in j)if(j.hasOwnProperty(l)){var m=j[l],n=l.split("/"),o=!1;for(i=0;i<g&&(n[i]==f[i]||"*"==n[i]);i++){var p=i+1;if(p==n.length&&(p==g||"*"==n[i])){o=!0;break}}o&&Array.prototype.push.apply(k,m)}var h=k.concat(h)}"undefined"==typeof b[e]&&(b[e]={}),b[e][a]=h},this.get_routes=function(){return b},this.change_route=function(a,b){var d=this;b="boolean"==typeof b?b:null,d.previous_uri=c,window.history.pushState("","",a),d.execute_route(b)},this.refresh=function(){var a=this;a.change_route(c)},this.disable_handlers=function(){d=!0},this.enable_handlers=function(){d=!1},this.query_params=function(a){for(var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=window.location.search.substring(1),g={};b=d.exec(f);)g[e(b[1])]=e(b[2]);return"undefined"!=typeof a?g[a]:g}};